clc;
clear;

n=0:0.01:10;
y1=sin(n);
s=randn(size(n));
sn1=sqrt(1)*s;
sn2=sin(s);
sn=sn1+sn2;
SNR=-log(y1/sn);
%p=s(1:1000);
%n=sn(1:1000);
%x=y1(1:1000);
y2=y1+sn;
net=newff(minmax(s),[10,1],{'tansig','purelin'},'trainlm'); 
net.trainParam.show=10;
net.trainParam.epochs=100;
net.trainParam.goal=0.001;
net.trainParam.lr=0.01;
[net,tr]=train(net,s,sn);
a=sim(net,s);
y3=y2-a;
figure(1);
plot(n,y1);
%axis([0 1000 -1.5 1.5]);
title('原始 sin 信号');
xlabel('时间 t');
ylabel('幅值');
figure(2);
plot(n,y2);
%axis([0 1000 -1.5 1.5]);
title('被随机噪声污染以后的信号');
xlabel('时间 t');
ylabel('幅值');
figure(3);
subplot(2,1,1);
plot(n,y1);
%axis([0 1000 -1.5 1.5]);
title('原始 sin 信号');
xlabel('时间 t');
ylabel('幅值');
subplot(2,1,2);
plot(n,y3);
axis([0 10 -1.5 1.5]);
title('经过噪声抵消后的信号');
xlabel('时间 t');
ylabel('幅值');